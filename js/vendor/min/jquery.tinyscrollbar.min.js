!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){function e(e,n){function s(){return m.update(),h(),m}function c(){z.css(P,m.contentPosition/m.trackRatio),p.css(P,-m.contentPosition),S.css(k,m.trackSize),f.css(k,m.trackSize),z.css(k,m.thumbSize)}function h(){b?l[0].ontouchstart=function(t){1===t.touches.length&&(a(t.touches[0]),t.stopPropagation())}:(z.bind("mousedown",a),f.bind("mousedown",r)),m.options.wheel&&window.addEventListener?(e[0].addEventListener("DOMMouseScroll",u,!1),e[0].addEventListener("mousewheel",u,!1)):m.options.wheel&&(e[0].onmousewheel=u)}function a(e){t("body").addClass("noSelect"),v=w?e.pageX:e.pageY,m.thumbPosition=parseInt(z.css(P),10)||0,b?(document.ontouchmove=function(t){t.preventDefault(),r(t.touches[0])},document.ontouchend=d):(t(document).bind("mousemove",r),t(document).bind("mouseup",d),z.bind("mouseup",d))}function u(i){if(m.contentRatio<1){var o=i||window.event,n=o.wheelDelta?o.wheelDelta/120:-o.detail/3;m.contentPosition-=n*m.options.wheelSpeed,m.contentPosition=Math.min(m.contentSize-m.viewportSize,Math.max(0,m.contentPosition)),e.trigger("move"),z.css(P,m.contentPosition/m.trackRatio),p.css(P,-m.contentPosition),(m.options.wheelLock||m.contentPosition!==m.contentSize-m.viewportSize&&0!==m.contentPosition)&&(o=t.event.fix(o),o.preventDefault())}}function r(t){if(m.contentRatio<1){var i=w?t.pageX:t.pageY,o=i-v;m.options.scrollInvert&&b&&(o=v-i);var n=Math.min(m.trackSize-m.thumbSize,Math.max(0,m.thumbPosition+o));m.contentPosition=n*m.trackRatio,e.trigger("move"),z.css(P,n),p.css(P,-m.contentPosition)}}function d(){t("body").removeClass("noSelect"),t(document).unbind("mousemove",r),t(document).unbind("mouseup",d),z.unbind("mouseup",d),document.ontouchmove=document.ontouchend=null}this.options=t.extend({},o,n),this._defaults=o,this._name=i;var m=this,l=e.find(".viewport"),p=e.find(".overview"),S=e.find(".scrollbar"),f=S.find(".track"),z=S.find(".thumb"),v=0,w="x"===this.options.axis,b="ontouchstart"in document.documentElement,k=w?"width":"height",P=w?"left":"top";return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.update=function(t){var e=k.charAt(0).toUpperCase()+k.slice(1).toLowerCase();switch(this.viewportSize=l[0]["offset"+e],this.contentSize=p[0]["scroll"+e],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(0,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=this.options.thumbSize?(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize):this.contentSize/this.trackSize,S.toggleClass("disable",this.contentRatio>=1),t){case"bottom":this.contentPosition=this.contentSize-this.viewportSize;break;case"relative":this.contentPosition=Math.min(this.contentSize-this.viewportSize,Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(t,10)||0}c()},s()}var i="tinyscrollbar",o={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,scrollInvert:!1,trackSize:!1,thumbSize:!1};t.fn[i]=function(o){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new e(t(this),o))})}});